#!/usr/bin/env python

import fitsio
import desclass


def get_args():
    import argparse

    parser = argparse.ArgumentParser()

    parser.add_argument('--input', required=True)
    parser.add_argument('--rmag-index', type=int, required=True)
    parser.add_argument('--seed', type=int, required=True)
    parser.add_argument('--output', required=True)
    parser.add_argument('--show', action='store_true')

    return parser.parse_args()


def main():

    args = get_args()

    data = fitsio.read(args.input)

    desclass.fit_conc_pdf.fit_conc_pdf(
        data=data,
        rmag_index=args.rmag_index,
        seed=args.seed,
        output=args.output,
        show=args.show,
    )


if __name__ == '__main__':
    main()
